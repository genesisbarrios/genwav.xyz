!(function(){"use strict";var p=function(s,o){for(var i=0;i<s.length;i++)o(s[i])},b=Object.assign||function(s){for(var o,i=1,a=arguments.length;i<a;i++){o=arguments[i];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(s[d]=o[d])}return s},y=window.location,l=window.document.currentScript,H=l.getAttribute("data-instance")||"AhrefsAnalytics",E=l.getAttribute("data-api")||new URL(l.src).origin+"/api/event",M=l.getAttribute("data-error")||new URL(l.src).origin+"/api/error",I=l.getAttribute("data-track-visibility")!=null,$=l.getAttribute("data-no-pageview-on-load")!=null;function T(s,o,i){var a=new XMLHttpRequest;a.open("POST",s,!0),a.setRequestHeader("Content-Type","text/plain"),a.send(o),a.onreadystatechange=function(){a.readyState===4&&i!=null&&i()}}function f(s){try{s()}catch(i){if(i instanceof Error)T(M,JSON.stringify({message:i.message,stack:i.stack}));else{var o="cannot-stringify-error";try{o=String(i)}catch(a){}T(M,JSON.stringify({message:o,stack:null}))}throw i}}f(function(){function s(t,e){t&&console.warn("Ignoring Event: "+t),e&&e.callback&&e.callback()}function o(t,e){if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(y.hostname)||y.protocol==="file:")return s("localhost",e);if((window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)&&!window.__web_analytics)return s(null,e);var n=l.getAttribute("data-key"),r=l.getAttribute("data-domain");if(n==null&&r==null)return s("missing data-key",e);var u;try{u=window.navigator.languages||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||window.navigator.systemLanguage}catch(h){}var v={},m=!1;try{for(var q=0;q<l.attributes.length;q++){var C=l.attributes[q];if(C.name.startsWith("data-prop-")){var W=C.name.substring(10),X=C.value;W&&X&&(v[W]=X,m=!0)}}}catch(h){}var c={};c.n=t,c.u=y.href,u!=null&&(c.l=u),r!=null&&(c.d=r),n!=null&&(c.k=n),c.r=window.document.referrer||null,e&&e.meta&&(c.m=JSON.stringify(e.meta)),(e&&e.props||m)&&(c.p=JSON.stringify(b({},v,e==null?void 0:e.props)));var N;try{N=window.screen.width}catch(h){}N!=null&&(c.sw=N);var R;try{R=window.screen.height}catch(h){}R!=null&&(c.sh=R);var _;try{_=window.devicePixelRatio}catch(h){}return _!=null&&(c.sr=_),c}function i(t,e){var n=o(t,e);if(n!=null){var r=new XMLHttpRequest;r.open("POST",E,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(n)),r.onreadystatechange=function(){r.readyState===4&&e&&e.callback&&e.callback({status:r.status})}}}function a(t,e){var n=navigator.sendBeacon!=null,r=o(t,e);if(r!=null){var u=JSON.stringify(r);if(n){var v=new Blob([u],{type:"text/plain"});navigator.sendBeacon(E,v)}else{var m=new XMLHttpRequest;m.open("POST",E,!0),m.setRequestHeader("Content-Type","text/plain"),m.send(u)}}}window[H]={sendEvent:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f(function(){i.apply(void 0,t)})}};var d;function w(){f(function(){d!==y.pathname&&(d=y.pathname,i("pageview"))})}var S=window.history;if(S.pushState){var D=S.pushState;S.pushState=function(){D.apply(this,arguments),w()},window.addEventListener("popstate",w)}$||(window.document.visibilityState==="prerender"?window.document.addEventListener("visibilitychange",function(){d||window.document.visibilityState!=="visible"||w()}):w()),I&&(document.addEventListener("visibilitychange",function(){f(function(){if(d==null){var t=document.visibilityState;t==="hidden"?a("x-visibilitychange-hidden"):t==="visible"&&a("x-visibilitychange-visible")}})}),document.addEventListener("pagehide",function(){f(function(){return a("x-pagehide")})}));var J=/\bAhrefsAnalytics\-prop\-([^\s\-]+)\-([^\s]+)/g;function k(t){if(t){var e=t.className;if(e){var n={};J.lastIndex=0;for(var r=null;r=J.exec(e);){var u=r[1],v=r[2];!u||!v||(n[u]=v)}if(Object.keys(n).length!==0)return n}}}function V(t,e){if(!(e!=null&&e.defaultPrevented)&&!(e!=null&&e.type==="auxclick"&&e.button!==1)&&t&&t.href&&!(t.protocol==="data:"||t.protocol==="blob:"||t.protocol==="javascript:")){var n=k(t);a("x-link-click",{props:b({},n,{href:t.href}),meta:{metaKey:String(!!(e!=null&&e.metaKey)),ctrlKey:String(!!(e!=null&&e.ctrlKey)),shiftKey:String(!!(e!=null&&e.shiftKey))}})}}function F(t){return!!t&&t instanceof HTMLAnchorElement&&!!t.href}function z(t,e){if(!(e!=null&&e.defaultPrevented)&&t&&t.action){var n=k(t);a("x-form-submit",{props:b({},n,{action:t.action})})}}function K(t){return!!t&&t instanceof HTMLFormElement&&!!t.action}function j(t,e){var n=k(e);a(t,{props:n})}var B='*[class^="AhrefsAnalytics-event-"]',U=/\bAhrefsAnalytics\-event\-([^\s]+)/g;function A(t){if(!t||!(t instanceof HTMLElement)||!t.className)return[];var e=null,n=[];for(U.lastIndex=0;e=U.exec(t.className);){var r=e[1];r&&n.push(r)}return n}function G(t){return A(t).length>0}if(window.MutationObserver!=null){var L=function(t){if(!t.ahrefsAnalytics_click_tracked){t.ahrefsWebAnalytics_click_tracked=!0;var e=function(n){return f(function(){return V(t,n)})};t.addEventListener("click",e),t.addEventListener("auxclick",e)}},O=function(t){if(!t.ahrefsAnalytics_submit_tracked){t.ahrefsWebAnalytics_submit_tracked=!0;var e=function(n){return f(function(){z(t,n);for(var r=0,u=A(t);r<u.length;r++){var v=u[r];j(v,t)}})};t.addEventListener("submit",e)}},x=function(t){if(!K(t)&&!t.ahrefsAnalytics_event_tracked){t.ahrefsWebAnalytics_event_tracked=!0;var e=function(){f(function(){for(var n=0,r=A(t);n<r.length;n++){var u=r[n];j(u,t)}})};t.addEventListener("click",e)}},Q=new MutationObserver(function(t){f(function(){t.forEach(function(e){e.type==="childList"&&p(e.addedNodes,function(n){n.nodeType===Node.ELEMENT_NODE&&(F(n)?L(n):n.querySelectorAll!=null&&p(n.querySelectorAll("a"),L),K(n)?O(n):n.querySelectorAll!=null&&p(n.querySelectorAll("form"),O),G(n)?x(n):n.querySelectorAll!=null&&p(n.querySelectorAll(B),x))})})})});window.addEventListener("DOMContentLoaded",function(){f(function(){p(document.querySelectorAll("a"),L),p(document.querySelectorAll("form"),O),p(document.querySelectorAll(B),x),Q.observe(document.body,{childList:!0,subtree:!0})})})}{var g=void 0,P=H+"-ready";typeof CustomEvent=="function"?g=new CustomEvent(P,{detail:null,bubbles:!0,cancelable:!0}):typeof document!="undefined"&&document.createEvent&&(g=document.createEvent("CustomEvent"),g.initCustomEvent(P,!0,!0,null)),g!=null&&typeof document!="undefined"&&(document.dispatchEvent?document.dispatchEvent(g):"fireEvent"in document&&document.fireEvent("on"+P,g))}})})();
